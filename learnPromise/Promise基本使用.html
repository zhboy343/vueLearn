<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Promise</title>
</head>
<body>
  <script>
    // 模拟异步请求--使用setTimeout
    // setTimeout(() =>{
    //   console.log('Hello,World')
    // }, 1000)

    // Promise使用
    /*
      创建: new Promise(参数)
      传入参数: 函数(resolve, reject)
      resolve, reject 本身又是函数
      resolve:成功时调用--执行then中函数   reject: 失败时调用--执行catch中函数
      注:catch只需在最后写就行，多嵌套请求时，调用reject后，之后的请求不会再执行，直接跳到catch
      总结: 请求放在new Promise中，处理放在上一次Promise后的then中
    */
    new Promise((resolve, reject) =>{

      //第一次请求
      setTimeout(() =>{
        // 当调用 resolve() 函数时,会执行下 then()
        const data = "111"
        resolve(data)
        // reject("error!!!")
      }, 1000)

    }).then((data) =>{

      // 第一次请求结果处理
      console.log('Hello,World' + data)
      return new Promise((resolve,reject) =>{
        //第二次次请求
        setTimeout(() =>{
          const data2 = "222"
          // 若是失败时--不执行then，执行catch中的函数
          reject("error!!!")
        }, 1000)
      })

    }).then((data) =>{ 
      // 第二次请求结果处理
      console.log('Hello,vue' + data)
    }).catch((err) =>{
      console.log(err)
    })
  </script>
</body>
</html>